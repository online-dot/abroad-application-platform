{% extends 'layout.html' %}
{% block content %}
<div class="login-container">
    <h2>Reset Your Password</h2>
    <form method="POST">
        <label for="password">New Password:</label>
        <input type="password" name="password" required>
        <label for="password">Password:</label>
<input type="password" name="password" id="password" required oninput="checkPasswordStrength()">
<small id="strengthMessage" style="display: block; margin-top: 5px; font-weight: bold;"></small>

<script>
function checkPasswordStrength() {
    const password = document.getElementById("password").value;
    const message = document.getElementById("strengthMessage");

    let strength = 0;
    if (password.length >= 8) strength++;
    if (/[A-Z]/.test(password)) strength++;
    if (/[a-z]/.test(password)) strength++;
    if (/\d/.test(password)) strength++;
    if (/[@$!%*?&]/.test(password)) strength++;

    const strengthLevels = [
        { score: 0, text: "Too weak", color: "red" },
        { score: 2, text: "Weak", color: "orange" },
        { score: 3, text: "Moderate", color: "goldenrod" },
        { score: 4, text: "Strong", color: "green" },
        { score: 5, text: "Very Strong", color: "darkgreen" },
    ];

    const current = strengthLevels.find(level => strength <= level.score) || strengthLevels[4];
    message.textContent = current.text;
    message.style.color = current.color;
}
</script>

        <button type="submit">Update Password</button>
    </form>
    <p><a href="{{ url_for('auth.login') }}">Back to Login</a></p>
</div>
{% endblock %}
